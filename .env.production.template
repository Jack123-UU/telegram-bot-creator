# TeleBot Platform - Production Environment Variables Template
# üö® CRITICAL SECURITY NOTICE üö®
# This file contains sensitive configuration. Never commit real values to version control.

# =============================================================================
# üîê VAULT CONFIGURATION (Required for Production)
# =============================================================================
# Vault server address - use HTTPS in production
VAULT_ADDR=https://vault.yourdomain.com:8200

# Vault authentication - use AppRole in production
VAULT_ROLE_ID=your_vault_role_id_here
VAULT_SECRET_ID=your_vault_secret_id_here

# Vault namespace (if using Vault Enterprise)
VAULT_NAMESPACE=

# KV mount path
VAULT_MOUNT_PATH=secret

# =============================================================================
# üåç ENVIRONMENT CONFIGURATION
# =============================================================================
ENVIRONMENT=production
DEBUG=false
LOG_LEVEL=INFO

# =============================================================================
# üöÄ APPLICATION CONFIGURATION
# =============================================================================
# API Server
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=4

# Enable/disable API documentation (disable in production)
ENABLE_DOCS=false
DOCS_PASSWORD=secure_docs_password_here

# =============================================================================
# üõ°Ô∏è SECURITY CONFIGURATION
# =============================================================================
# Allowed origins for CORS
ALLOWED_ORIGINS=https://telebot.yourdomain.com,https://admin.yourdomain.com

# Rate limiting (requests per minute)
RATE_LIMIT_PER_MINUTE=100
RATE_LIMIT_BURST=20

# Session configuration
SESSION_TIMEOUT=900  # 15 minutes
MAX_SESSIONS_PER_USER=3

# API key for external integrations
API_KEY_HEADER=X-API-Key

# =============================================================================
# üîí SSL/TLS CONFIGURATION
# =============================================================================
# SSL certificates (paths in container)
SSL_CERT_PATH=/etc/ssl/certs/telebot.crt
SSL_KEY_PATH=/etc/ssl/private/telebot.key
SSL_CA_PATH=/etc/ssl/certs/ca.crt

# Force HTTPS
FORCE_HTTPS=true
HSTS_MAX_AGE=31536000

# =============================================================================
# üìä MONITORING & LOGGING
# =============================================================================
# Metrics
METRICS_ENABLED=true
METRICS_PORT=9090

# Health checks
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_PORT=8080
HEALTH_CHECK_INTERVAL=30

# Structured logging
LOG_FORMAT=json
LOG_TIMESTAMP=true

# =============================================================================
# üí∞ PAYMENT CONFIGURATION
# =============================================================================
# TRON network configuration
TRON_NETWORK=mainnet  # or 'testnet' for testing
TRON_NODE_URL=https://api.trongrid.io
TRON_EVENT_SERVER=https://api.trongrid.io

# Payment processing
PAYMENT_CONFIRMATION_BLOCKS=3
PAYMENT_TIMEOUT_MINUTES=15
UNIQUE_AMOUNT_DECIMALS=6
MIN_PAYMENT_AMOUNT=1.0
MAX_PAYMENT_AMOUNT=10000.0

# Payment monitoring
PAYMENT_CHECK_INTERVAL=30  # seconds
PAYMENT_RETRY_ATTEMPTS=3

# =============================================================================
# üìÅ FILE STORAGE CONFIGURATION
# =============================================================================
# Upload limits
MAX_UPLOAD_SIZE=104857600  # 100MB
ALLOWED_FILE_TYPES=.zip,.csv,.xlsx,.session,.tdata

# Storage paths
UPLOAD_PATH=/app/data/uploads
TEMP_PATH=/app/data/temp
BACKUP_PATH=/app/data/backups

# File encryption
FILE_ENCRYPTION_ENABLED=true
FILE_COMPRESSION_ENABLED=true

# =============================================================================
# üóÑÔ∏è DATABASE CONFIGURATION
# =============================================================================
# Connection pool settings
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=30
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# Query timeout
DB_QUERY_TIMEOUT=30

# =============================================================================
# üîÑ REDIS CONFIGURATION
# =============================================================================
# Connection settings
REDIS_POOL_SIZE=20
REDIS_SOCKET_KEEPALIVE=true
REDIS_SOCKET_KEEPALIVE_OPTIONS=1,3,5

# =============================================================================
# ü§ñ TELEGRAM BOT CONFIGURATION
# =============================================================================
# Bot settings
BOT_WEBHOOK_ENABLED=true
BOT_WEBHOOK_PATH=/webhook/telegram
BOT_WEBHOOK_SECRET_HEADER=X-Telegram-Bot-Api-Secret-Token

# Polling settings (if webhook disabled)
BOT_POLLING_INTERVAL=1
BOT_POLLING_TIMEOUT=10

# Message limits
BOT_MAX_MESSAGE_LENGTH=4096
BOT_MAX_BUTTONS_PER_ROW=3
BOT_MAX_ROWS_PER_MESSAGE=8

# =============================================================================
# üîÑ WORKER CONFIGURATION
# =============================================================================
# Celery/RQ workers
WORKER_CONCURRENCY=4
WORKER_PREFETCH_MULTIPLIER=1
WORKER_MAX_TASKS_PER_CHILD=1000

# Task timeouts
TASK_SOFT_TIME_LIMIT=300  # 5 minutes
TASK_TIME_LIMIT=600       # 10 minutes

# Queue configuration
HIGH_PRIORITY_QUEUE=high
NORMAL_PRIORITY_QUEUE=normal
LOW_PRIORITY_QUEUE=low

# =============================================================================
# üîî NOTIFICATION CONFIGURATION
# =============================================================================
# Email notifications
EMAIL_ENABLED=true
EMAIL_RATE_LIMIT=10  # emails per minute

# Telegram notifications
TELEGRAM_NOTIFICATIONS_ENABLED=true
ADMIN_CHAT_ID=your_admin_chat_id

# Webhook notifications
WEBHOOK_NOTIFICATIONS_ENABLED=true
WEBHOOK_TIMEOUT=30
WEBHOOK_RETRIES=3

# =============================================================================
# üìù AUDIT & COMPLIANCE
# =============================================================================
# Audit logging
AUDIT_ENABLED=true
AUDIT_LOG_LEVEL=INFO
AUDIT_RETENTION_DAYS=2555  # 7 years

# GDPR compliance
GDPR_ENABLED=true
DATA_RETENTION_DAYS=2555
RIGHT_TO_BE_FORGOTTEN=true

# =============================================================================
# üîÑ BACKUP & RECOVERY
# =============================================================================
# Backup configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30
BACKUP_COMPRESSION=true
BACKUP_ENCRYPTION=true

# Recovery settings
RECOVERY_POINT_OBJECTIVE=24  # hours
RECOVERY_TIME_OBJECTIVE=4    # hours

# =============================================================================
# üö¶ CIRCUIT BREAKER CONFIGURATION
# =============================================================================
CIRCUIT_BREAKER_ENABLED=true
CIRCUIT_BREAKER_FAILURE_THRESHOLD=5
CIRCUIT_BREAKER_RECOVERY_TIMEOUT=60
CIRCUIT_BREAKER_EXPECTED_EXCEPTION=RequestException

# =============================================================================
# üéØ FEATURE FLAGS
# =============================================================================
# Feature toggles
FEATURE_MULTI_LANGUAGE=true
FEATURE_AGENT_SYSTEM=true
FEATURE_BULK_UPLOAD=true
FEATURE_API_ENDPOINTS=true
FEATURE_PAYMENT_WEBHOOKS=true
FEATURE_TELEGRAM_MINI_APP=false

# Experimental features
EXPERIMENTAL_FEATURES=false
FEATURE_AI_CHAT=false
FEATURE_VOICE_ORDERS=false

# =============================================================================
# ‚ö° PERFORMANCE TUNING
# =============================================================================
# Connection timeouts
HTTP_TIMEOUT=30
HTTP_CONNECT_TIMEOUT=10
HTTP_READ_TIMEOUT=20

# Cache configuration
CACHE_ENABLED=true
CACHE_TTL=3600  # 1 hour
CACHE_MAX_SIZE=1000
CACHE_EVICTION_POLICY=lru

# Async settings
ASYNC_POOL_SIZE=100
ASYNC_TIMEOUT=30

# =============================================================================
# üîç DEVELOPMENT & DEBUGGING (Production: False)
# =============================================================================
# Development tools
ENABLE_PROFILER=false
ENABLE_DEBUGGER=false
ENABLE_AUTO_RELOAD=false

# Testing
TESTING_MODE=false
MOCK_EXTERNAL_SERVICES=false

# =============================================================================
# üåê LOCALIZATION
# =============================================================================
# Supported languages
SUPPORTED_LANGUAGES=en,zh,ru,es,fr
DEFAULT_LANGUAGE=en
FALLBACK_LANGUAGE=en

# Timezone
DEFAULT_TIMEZONE=UTC
LOCALIZE_TIMESTAMPS=true

# =============================================================================
# üìä ANALYTICS
# =============================================================================
# Analytics tracking
ANALYTICS_ENABLED=true
ANONYMOUS_ANALYTICS=true
ANALYTICS_SAMPLING_RATE=1.0

# User tracking
TRACK_USER_SESSIONS=true
TRACK_USER_ACTIONS=true
TRACK_PERFORMANCE_METRICS=true

# =============================================================================
# üîê SECRETS THAT WILL BE INJECTED FROM VAULT
# =============================================================================
# These will be automatically injected by External Secrets Operator
# DO NOT SET THESE VALUES HERE - THEY COME FROM VAULT

# BOT_TOKEN=          # From vault: secret/telebot/bot/token
# WEBHOOK_SECRET=     # From vault: secret/telebot/bot/webhook_secret
# DATABASE_URL=       # From vault: secret/telebot/database/*
# REDIS_URL=          # From vault: secret/telebot/redis/*
# INTERNAL_TOKEN=     # From vault: secret/telebot/api/internal_token
# JWT_SECRET_KEY=     # From vault: secret/telebot/api/jwt_secret
# AES_KEY=           # From vault: secret/telebot/encryption/aes_key
# TRON_PRIVATE_KEY=  # From vault: secret/telebot/payment/tron_private_key
# TRON_ADDRESS=      # From vault: secret/telebot/payment/tron_address
# MINIO_ACCESS_KEY=  # From vault: secret/telebot/storage/access_key
# MINIO_SECRET_KEY=  # From vault: secret/telebot/storage/secret_key
# SENTRY_DSN=        # From vault: secret/telebot/monitoring/sentry_dsn

# =============================================================================
# üìù PRODUCTION DEPLOYMENT CHECKLIST
# =============================================================================
# ‚úÖ 1. All secrets stored in Vault
# ‚úÖ 2. External Secrets Operator configured
# ‚úÖ 3. SSL certificates installed
# ‚úÖ 4. Firewall rules configured
# ‚úÖ 5. Monitoring alerts set up
# ‚úÖ 6. Backup procedures tested
# ‚úÖ 7. Disaster recovery plan documented
# ‚úÖ 8. Security scan completed
# ‚úÖ 9. Performance testing done
# ‚úÖ 10. Compliance requirements met

# =============================================================================
# üö® SECURITY REMINDERS
# =============================================================================
# 1. Never commit real secrets to version control
# 2. Use strong, unique passwords for all services
# 3. Enable 2FA/MFA wherever possible
# 4. Regularly rotate secrets and certificates
# 5. Monitor access logs and audit trails
# 6. Keep all dependencies updated
# 7. Use network segmentation and firewalls
# 8. Implement proper RBAC (Role-Based Access Control)
# 9. Encrypt data at rest and in transit
# 10. Have incident response procedures ready